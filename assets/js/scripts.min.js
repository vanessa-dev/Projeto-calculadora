"use strict";const display=document.querySelector(".display"),numeros=document.querySelectorAll("[id*=tecla]"),operadores=document.querySelectorAll("[id*=operador]"),buttonLimparDisplay=document.getElementById("limparDisplay"),buttonIgual=document.getElementById("igual"),buttonLimparCalculo=document.getElementById("limparCalculo"),buttonEspaco=document.getElementById("backspace"),buttonInverterSinal=document.getElementById("inverter"),buttonDecimal=document.getElementById("decimal");let novoNumero=!0,operador,numeroAnterior;const operacaoPendente=()=>void 0!==operador,calcular=()=>{if(operacaoPendente()){const numeroAtual=parseFloat(display.innerHTML.replace(".","").replace(",",".")),resultado=(novoNumero=!0,eval(""+numeroAnterior+operador+numeroAtual));atualizarDisplay(resultado)}},atualizarDisplay=e=>{novoNumero?(display.innerHTML=e.toLocaleString("BR"),novoNumero=!1):display.innerHTML+=e.toLocaleString("BR"),buttonIgual.focus()},inserirNumero=e=>atualizarDisplay(e.target.innerHTML),selecionarOperador=(numeros.forEach(e=>e.addEventListener("click",inserirNumero)),e=>{novoNumero||(calcular(),novoNumero=!0,operador=e.target.innerText,numeroAnterior=parseFloat(display.innerText.replace(".","").replace(",",".")))}),ativarIgual=(operadores.forEach(e=>e.addEventListener("click",selecionarOperador)),()=>{calcular(),operador=void 0}),limparDisplay=(buttonIgual.addEventListener("click",ativarIgual),()=>display.innerHTML=""),limparCalculo=(buttonLimparDisplay.addEventListener("click",limparDisplay),()=>{limparDisplay(),operador=void 0,novoNumero=!0,numeroAnterior=void 0}),removerUltimoNumero=(buttonLimparCalculo.addEventListener("click",limparCalculo),()=>display.innerHTML=display.innerHTML.slice(0,-1)),inverterSinal=(buttonEspaco.addEventListener("click",removerUltimoNumero),()=>{novoNumero=!0,atualizarDisplay(-1*display.innerHTML)}),existeDecimal=(buttonInverterSinal.addEventListener("click",inverterSinal),()=>-1!==display.innerHTML.indexOf(",")),existeValor=()=>0<display.innerHTML.length,inserirDecimal=()=>{existeDecimal()||(novoNumero?atualizarDisplay("0,"):atualizarDisplay(","))},mapaTeclado=(buttonDecimal.addEventListener("click",inserirDecimal),{0:"tecla0",1:"tecla1",2:"tecla2",3:"tecla3",4:"tecla4",5:"tecla5",6:"tecla6",7:"tecla7",8:"tecla8",9:"tecla9","/":"operadorDividir","*":"operadorMultiplicar","-":"operadorSubtrair","+":"operadorAdicionar","=":"igual",Enter:"igual",Backspace:"backspace",c:"limparDisplay",Escape:"limparCalculo",",":"decimal"}),mapearTeclado=e=>{const a=e.key;-1!==Object.keys(mapaTeclado).indexOf(a)&&document.getElementById(mapaTeclado[a]).click()};document.addEventListener("keydown",mapearTeclado);